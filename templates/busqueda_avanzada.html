<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√∫squeda Avanzada - IICA Chile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --iica-primary: #2E7D32;
            --iica-secondary: #1976D2;
            --iica-accent: #FF6F00;
            --iica-success: #4CAF50;
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            font-family: 'Inter', sans-serif;
        }
        
        .search-container {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .filter-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .filter-section h5 {
            color: var(--iica-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-search {
            background: linear-gradient(135deg, var(--iica-primary) 0%, var(--iica-secondary) 100%);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-search:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3);
            color: white;
        }
        
        .result-card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 4px solid var(--iica-primary);
            transition: all 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .result-meta {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .meta-item i {
            color: var(--iica-primary);
        }
        
        .search-stats {
            background: linear-gradient(135deg, var(--iica-primary) 0%, var(--iica-secondary) 100%);
            color: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .ai-suggestion {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .ai-suggestion h6 {
            color: #1976d2;
            margin-bottom: 0.5rem;
        }
        
        .tag {
            display: inline-block;
            background: var(--iica-primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            margin: 0.25rem;
        }
        
        .tag:hover {
            background: var(--iica-secondary);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h2><i class="bi bi-search"></i> B√∫squeda Avanzada</h2>
                        <p class="text-muted">Encuentra proyectos espec√≠ficos con filtros detallados</p>
                    </div>
                    <div>
                        <button class="btn btn-outline-primary me-2" onclick="guardarBusqueda()">
                            <i class="bi bi-bookmark"></i> Guardar B√∫squeda
                        </button>
                        <button class="btn btn-primary" onclick="nuevaBusqueda()">
                            <i class="bi bi-plus"></i> Nueva B√∫squeda
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Estad√≠sticas de B√∫squeda -->
        <div class="search-stats">
            <div class="row">
                <div class="col-md-3">
                    <h4>57</h4>
                    <p class="mb-0">Proyectos Disponibles</p>
                </div>
                <div class="col-md-3">
                    <h4>15</h4>
                    <p class="mb-0">Fuentes de Financiamiento</p>
                </div>
                <div class="col-md-3">
                    <h4>6</h4>
                    <p class="mb-0">√Åreas de Inter√©s</p>
                </div>
                <div class="col-md-3">
                    <h4>USD 2.5M</h4>
                    <p class="mb-0">Monto Total Disponible</p>
                </div>
            </div>
        </div>
        
        <!-- Formulario de B√∫squeda Avanzada -->
        <div class="search-container">
            <form id="formularioBusqueda">
                <div class="row">
                    <!-- B√∫squeda por Texto -->
                    <div class="col-md-12 mb-4">
                        <div class="filter-section">
                            <h5><i class="bi bi-search"></i> B√∫squeda por Texto</h5>
                            <div class="row">
                                <div class="col-md-8">
                                    <input type="text" class="form-control form-control-lg" id="textoBusqueda" 
                                           placeholder="Ingrese palabras clave, nombre del proyecto, descripci√≥n...">
                                </div>
                                <div class="col-md-4">
                                    <select class="form-select form-select-lg" id="tipoBusqueda">
                                        <option value="todos">Buscar en todo</option>
                                        <option value="nombre">Solo en nombres</option>
                                        <option value="descripcion">Solo en descripciones</option>
                                        <option value="fuente">Solo en fuentes</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Sugerencias de IA -->
                            <div class="ai-suggestion">
                                <h6><i class="bi bi-robot"></i> Sugerencias de B√∫squeda Inteligente</h6>
                                <div class="d-flex flex-wrap">
                                    <span class="tag" onclick="aplicarSugerencia('agricultura sostenible')">Agricultura Sostenible</span>
                                    <span class="tag" onclick="aplicarSugerencia('juventudes rurales')">Juventudes Rurales</span>
                                    <span class="tag" onclick="aplicarSugerencia('innovaci√≥n tecnol√≥gica')">Innovaci√≥n Tecnol√≥gica</span>
                                    <span class="tag" onclick="aplicarSugerencia('gesti√≥n h√≠drica')">Gesti√≥n H√≠drica</span>
                                    <span class="tag" onclick="aplicarSugerencia('desarrollo rural')">Desarrollo Rural</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Filtros por Categor√≠a -->
                    <div class="col-md-6">
                        <div class="filter-section">
                            <h5><i class="bi bi-funnel"></i> Filtros por Categor√≠a</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">√Årea de Inter√©s</label>
                                    <select class="form-select" id="areaInteres" multiple>
                                        <option value="Agricultura Sostenible">Agricultura Sostenible</option>
                                        <option value="Desarrollo Rural">Desarrollo Rural</option>
                                        <option value="Innovaci√≥n Tecnol√≥gica">Innovaci√≥n Tecnol√≥gica</option>
                                        <option value="Juventudes Rurales">Juventudes Rurales</option>
                                        <option value="Seguridad Alimentaria">Seguridad Alimentaria</option>
                                        <option value="Gesti√≥n H√≠drica">Gesti√≥n H√≠drica</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Fuente de Financiamiento</label>
                                    <select class="form-select" id="fuenteFinanciamiento" multiple>
                                        <option value="IICA">IICA</option>
                                        <option value="CORFO">CORFO</option>
                                        <option value="MINAGRI">MINAGRI</option>
                                        <option value="INDAP">INDAP</option>
                                        <option value="FIA">FIA</option>
                                        <option value="Banco Mundial">Banco Mundial</option>
                                        <option value="FAO">FAO</option>
                                        <option value="BID">BID</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Filtros por Monto y Fecha -->
                    <div class="col-md-6">
                        <div class="filter-section">
                            <h5><i class="bi bi-currency-dollar"></i> Filtros por Monto y Fecha</h5>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Monto M√≠nimo</label>
                                    <input type="number" class="form-control" id="montoMinimo" placeholder="Ej: 10000">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Monto M√°ximo</label>
                                    <input type="number" class="form-control" id="montoMaximo" placeholder="Ej: 1000000">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Fecha de Cierre Desde</label>
                                    <input type="date" class="form-control" id="fechaDesde">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Fecha de Cierre Hasta</label>
                                    <input type="date" class="form-control" id="fechaHasta">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Filtros Adicionales -->
                    <div class="col-md-12">
                        <div class="filter-section">
                            <h5><i class="bi bi-sliders"></i> Filtros Adicionales</h5>
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <label class="form-label">Estado del Proyecto</label>
                                    <select class="form-select" id="estadoProyecto">
                                        <option value="">Todos los estados</option>
                                        <option value="Abierto">Abierto</option>
                                        <option value="Cerrado">Cerrado</option>
                                        <option value="Pr√≥ximo a cerrar">Pr√≥ximo a cerrar</option>
                                    </select>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label class="form-label">Tipo de Organizaci√≥n</label>
                                    <select class="form-select" id="tipoOrganizacion">
                                        <option value="">Todos los tipos</option>
                                        <option value="ONG">ONG</option>
                                        <option value="Cooperativa">Cooperativa</option>
                                        <option value="Asociaci√≥n">Asociaci√≥n</option>
                                        <option value="Empresa">Empresa</option>
                                        <option value="Universidad">Universidad</option>
                                    </select>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label class="form-label">Duraci√≥n del Proyecto</label>
                                    <select class="form-select" id="duracionProyecto">
                                        <option value="">Cualquier duraci√≥n</option>
                                        <option value="corta">Corta (1-6 meses)</option>
                                        <option value="media">Media (6-18 meses)</option>
                                        <option value="larga">Larga (18+ meses)</option>
                                    </select>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label class="form-label">Nivel de Experiencia</label>
                                    <select class="form-select" id="nivelExperiencia">
                                        <option value="">Todos los niveles</option>
                                        <option value="principiante">Principiante</option>
                                        <option value="intermedio">Intermedio</option>
                                        <option value="avanzado">Avanzado</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Botones de Acci√≥n -->
                    <div class="col-md-12 text-center">
                        <button type="button" class="btn btn-search me-3" onclick="ejecutarBusqueda()">
                            <i class="bi bi-search"></i> Buscar Proyectos
                        </button>
                        <button type="button" class="btn btn-outline-secondary me-3" onclick="limpiarFiltros()">
                            <i class="bi bi-arrow-clockwise"></i> Limpiar Filtros
                        </button>
                        <button type="button" class="btn btn-outline-primary" onclick="busquedaIA()">
                            <i class="bi bi-robot"></i> B√∫squeda con IA
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Resultados de B√∫squeda -->
        <div id="resultadosBusqueda" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h4>Resultados de B√∫squeda</h4>
                <div>
                    <button class="btn btn-outline-primary me-2" onclick="exportarResultados()">
                        <i class="bi bi-download"></i> Exportar
                    </button>
                    <button class="btn btn-outline-success" onclick="guardarResultados()">
                        <i class="bi bi-bookmark"></i> Guardar
                    </button>
                </div>
            </div>
            
            <!-- Resultados -->
            <div id="listaResultados">
                <!-- Los resultados se cargar√°n aqu√≠ din√°micamente -->
            </div>
        </div>
        
        <!-- B√∫squedas Guardadas -->
        <div class="search-container">
            <h5><i class="bi bi-bookmark"></i> B√∫squedas Guardadas</h5>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">Agricultura Sostenible</h6>
                            <p class="card-text text-muted">12 proyectos encontrados</p>
                            <button class="btn btn-sm btn-outline-primary" onclick="cargarBusquedaGuardada(1)">
                                <i class="bi bi-play"></i> Ejecutar
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">Proyectos IICA</h6>
                            <p class="card-text text-muted">8 proyectos encontrados</p>
                            <button class="btn btn-sm btn-outline-primary" onclick="cargarBusquedaGuardada(2)">
                                <i class="bi bi-play"></i> Ejecutar
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card">
                        <div class="card-body">
                            <h6 class="card-title">Juventudes Rurales</h6>
                            <p class="card-text text-muted">5 proyectos encontrados</p>
                            <button class="btn btn-sm btn-outline-primary" onclick="cargarBusquedaGuardada(3)">
                                <i class="bi bi-play"></i> Ejecutar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function ejecutarBusqueda() {
            const texto = document.getElementById('textoBusqueda').value;
            const area = document.getElementById('areaInteres').value;
            const fuente = document.getElementById('fuenteFinanciamiento').value;
            const montoMin = document.getElementById('montoMinimo').value;
            const montoMax = document.getElementById('montoMaximo').value;
            const fechaDesde = document.getElementById('fechaDesde').value;
            const fechaHasta = document.getElementById('fechaHasta').value;
            const estado = document.getElementById('estadoProyecto').value;
            
            console.log('B√∫squeda ejecutada:', {
                texto, area, fuente, montoMin, montoMax, fechaDesde, fechaHasta, estado
            });
            
            // Mostrar resultados
            document.getElementById('resultadosBusqueda').style.display = 'block';
            document.getElementById('listaResultados').innerHTML = `
                <div class="result-card">
                    <h5>Programa de Desarrollo Rural Sostenible FAO</h5>
                    <p class="text-muted">Proyecto de desarrollo rural integral con enfoque en sostenibilidad y participaci√≥n comunitaria.</p>
                    <div class="result-meta">
                        <div class="meta-item">
                            <i class="bi bi-building"></i>
                            <span>FAO</span>
                        </div>
                        <div class="meta-item">
                            <i class="bi bi-tag"></i>
                            <span>Desarrollo Rural</span>
                        </div>
                        <div class="meta-item">
                            <i class="bi bi-currency-dollar"></i>
                            <span>USD 1,000,000</span>
                        </div>
                        <div class="meta-item">
                            <i class="bi bi-calendar"></i>
                            <span>Cierra: 31/12/2024</span>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-primary btn-sm me-2" onclick="verProyecto(1)">
                            <i class="bi bi-eye"></i> Ver Detalles
                        </button>
                        <button class="btn btn-success btn-sm me-2" onclick="postularProyecto(1)">
                            <i class="bi bi-file-earmark-text"></i> Postular
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="agregarFavoritos(1)">
                            <i class="bi bi-heart"></i> Favorito
                        </button>
                    </div>
                </div>
                
                <div class="result-card">
                    <h5>Fondo de Adaptaci√≥n al Cambio Clim√°tico</h5>
                    <p class="text-muted">Financiamiento para proyectos de adaptaci√≥n al cambio clim√°tico en el sector agr√≠cola.</p>
                    <div class="result-meta">
                        <div class="meta-item">
                            <i class="bi bi-building"></i>
                            <span>Banco Mundial</span>
                        </div>
                        <div class="meta-item">
                            <i class="bi bi-tag"></i>
                            <span>Agricultura Sostenible</span>
                        </div>
                        <div class="meta-item">
                            <i class="bi bi-currency-dollar"></i>
                            <span>USD 2,000,000</span>
                        </div>
                        <div class="meta-item">
                            <i class="bi bi-calendar"></i>
                            <span>Cierra: 30/11/2024</span>
                        </div>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-primary btn-sm me-2" onclick="verProyecto(2)">
                            <i class="bi bi-eye"></i> Ver Detalles
                        </button>
                        <button class="btn btn-success btn-sm me-2" onclick="postularProyecto(2)">
                            <i class="bi bi-file-earmark-text"></i> Postular
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="agregarFavoritos(2)">
                            <i class="bi bi-heart"></i> Favorito
                        </button>
                    </div>
                </div>
            `;
        }
        
        function aplicarSugerencia(sugerencia) {
            document.getElementById('textoBusqueda').value = sugerencia;
        }
        
        function limpiarFiltros() {
            document.getElementById('formularioBusqueda').reset();
            document.getElementById('resultadosBusqueda').style.display = 'none';
        }
        
        function busquedaIA() {
            alert('B√∫squeda con IA activada:\n\nü§ñ Analizando consulta...\nüîç Buscando proyectos relacionados...\nüìä Aplicando filtros inteligentes...\n‚úÖ Resultados optimizados encontrados');
            ejecutarBusqueda();
        }
        
        function exportarResultados() {
            alert('Exportando resultados de b√∫squeda...\n\nFormato: Excel\nArchivo: busqueda_avanzada_resultados.xlsx');
        }
        
        function guardarResultados() {
            alert('Guardando resultados de b√∫squeda...\n\n‚úÖ B√∫squeda guardada como "B√∫squeda Avanzada 1"\nüìÖ Fecha: 13/10/2025\nüîç Filtros aplicados: 8 criterios');
        }
        
        function guardarBusqueda() {
            alert('Guardando b√∫squeda actual...\n\n‚úÖ B√∫squeda guardada exitosamente\nüìã Filtros: 8 criterios aplicados\nüìÖ Fecha: 13/10/2025');
        }
        
        function nuevaBusqueda() {
            limpiarFiltros();
        }
        
        function cargarBusquedaGuardada(id) {
            alert(`Cargando b√∫squeda guardada ${id}...\n\n‚úÖ Filtros aplicados\nüîç Ejecutando b√∫squeda...`);
            ejecutarBusqueda();
        }
        
        function verProyecto(id) {
            window.location.href = `/proyecto/${id}`;
        }
        
        function postularProyecto(id) {
            window.location.href = `/postular/${id}`;
        }
        
        function agregarFavoritos(id) {
            alert(`Proyecto ${id} agregado a favoritos`);
        }
    </script>
</body>
</html>
